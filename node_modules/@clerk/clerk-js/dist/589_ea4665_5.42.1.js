"use strict";(globalThis.webpackChunk_clerk_clerk_js=globalThis.webpackChunk_clerk_clerk_js||[]).push([["589"],{4150:function(e,i,t){t.d(i,{x:function(){return v}});var r=t(7126),a=t(2631),l=t(4194),n=t(7571),o=t(3064),s=t(9885),d=t(9037),c=t(4676),u=t(8748),p=t(9805),m=t(1835),h=t(9385),f=t(5756);let v=(0,s.withCardStateProvider)(function(){var e,i,t,v,g;let b=(0,d.v)(),_=(0,a.cL)(),{navigate:A}=(0,c.useRouter)(),{displayConfig:y,userSettings:C}=(0,n.useEnvironment)(),{attributes:S}=C,{afterSignUpUrl:U,signInUrl:N,unsafeMetadata:E,initialValues:z={}}=(0,n.useSignUpContext)(),I=(0,n.useCoreSignUp)(),K=(0,n.useOptions)(),L=!!l.useContext(n.SignInContext),w=!!((null===(e=K.experimental)||void 0===e?void 0:e.combinedFlow)&&L),F=C.signUp.progressive,[k,P]=l.useState((0,m.jj)(S,C.signUp.progressive)),Z={firstName:(0,u.Yp)("firstName",z.firstName||"",{type:"text",label:(0,o.localizationKeys)("formFieldLabel__firstName"),placeholder:(0,o.localizationKeys)("formFieldInputPlaceholder__firstName")}),lastName:(0,u.Yp)("lastName",z.lastName||"",{type:"text",label:(0,o.localizationKeys)("formFieldLabel__lastName"),placeholder:(0,o.localizationKeys)("formFieldInputPlaceholder__lastName")}),emailAddress:(0,u.Yp)("emailAddress",z.emailAddress||"",{type:"email",label:(0,o.localizationKeys)("formFieldLabel__emailAddress"),placeholder:(0,o.localizationKeys)("formFieldInputPlaceholder__emailAddress")}),username:(0,u.Yp)("username",z.username||"",{type:"text",label:(0,o.localizationKeys)("formFieldLabel__username"),placeholder:(0,o.localizationKeys)("formFieldInputPlaceholder__username")}),phoneNumber:(0,u.Yp)("phoneNumber",z.phoneNumber||"",{type:"tel",label:(0,o.localizationKeys)("formFieldLabel__phoneNumber"),placeholder:(0,o.localizationKeys)("formFieldInputPlaceholder__phoneNumber")}),password:(0,u.Yp)("password","",{type:"password",label:(0,o.localizationKeys)("formFieldLabel__password"),placeholder:(0,o.localizationKeys)("formFieldInputPlaceholder__password"),validatePassword:!0}),legalAccepted:(0,u.Yp)("legalAccepted","",{type:"checkbox",label:"",defaultChecked:!1,isRequired:C.signUp.legal_consent_enabled||!1})},R=(0,l.useMemo)(()=>I.missingFields&&1===I.missingFields.length&&"legal_accepted"===I.missingFields[0],[I.missingFields]);if((0,l.useEffect)(()=>{I.id||A(y.signUpUrl)},[]),!I.id)return(0,r.tZ)(s.LoadingCard,{});let T=!!Z.emailAddress.value,O=(null===(t=I.verifications)||void 0===t?void 0:null===(i=t.externalAccount)||void 0===i?void 0:i.status)=="verified",q=(null===(g=I.verifications)||void 0===g?void 0:null===(v=g.web3Wallet)||void 0===v?void 0:v.status)=="verified",x=(0,m.SE)({attributes:S,hasEmail:T,activeCommIdentifierType:k,signUp:I,isProgressiveSignUp:F,legalConsentRequired:C.signUp.legal_consent_enabled});(0,m.Ag)(x,I);let B=C.authenticatableSocialStrategies,M=C.web3FirstFactors,D=async e=>{var i,t;e.preventDefault();let r=Object.entries(x).reduce((e,i)=>{let[t,r]=i;return[...e,...r&&Z[t]?[Z[t]]:[]]},[]);E&&r.push({id:"unsafeMetadata",value:E});let a=!!(null===(i=r.find(e=>"emailAddress"===e.id))||void 0===i?void 0:i.value),l=!!(null===(t=r.find(e=>"phoneNumber"===e.id))||void 0===t?void 0:t.value);return I.missingFields.includes("email_address")&&I.missingFields.includes("phone_number")&&!a&&!l&&(0,m.Qc)(S,F)&&(r.push(Z.emailAddress),r.push(Z.phoneNumber)),b.setLoading(),b.setError(void 0),I.update((0,u.ni)(r)).then(e=>(0,f.v)({signUp:e,verifyEmailPath:"./verify-email-address",verifyPhonePath:"./verify-phone-number",handleComplete:()=>_.setActive({session:e.createdSessionId,redirectUrl:U}),navigate:A})).catch(e=>(0,u.S3)(e,r,b.setError)).finally(()=>b.setIdle())},X=(0,m.Qc)(S,F),W=!O&&B.length>0,H=!q&&M.length>0,Y=R?(0,o.localizationKeys)("signUp.legalConsent.continue.title"):(0,o.localizationKeys)("signUp.continue.title"),V=R?(0,o.localizationKeys)("signUp.legalConsent.continue.subtitle"):(0,o.localizationKeys)("signUp.continue.subtitle");return(0,r.tZ)(o.Flow.Part,{part:"complete",children:(0,r.BX)(s.Card.Root,{children:[(0,r.BX)(s.Card.Content,{children:[(0,r.BX)(s.Header.Root,{showLogo:!0,children:[(0,r.tZ)(s.Header.Title,{localizationKey:Y}),(0,r.tZ)(s.Header.Subtitle,{localizationKey:V})]}),(0,r.tZ)(s.Card.Alert,{children:b.error}),(0,r.tZ)(o.Flex,{direction:"col",elementDescriptor:o.descriptors.main,gap:8,children:(0,r.BX)(s.SocialButtonsReversibleContainerWithDivider,{children:[(W||H)&&!R&&(0,r.tZ)(h.O,{enableOAuthProviders:W,enableWeb3Providers:H,continueSignUp:!0}),(0,r.tZ)(p.W,{handleSubmit:D,fields:x,formState:Z,onlyLegalAcceptedMissing:R,canToggleEmailPhone:X,handleEmailPhoneToggle:e=>{(0,m.Qc)(S,F)&&P(e)}})]})})]}),(0,r.tZ)(s.Card.Footer,{children:w?null:(0,r.BX)(s.Card.Action,{elementId:"signUp",children:[(0,r.tZ)(s.Card.ActionText,{localizationKey:(0,o.localizationKeys)("signUp.continue.actionText")}),(0,r.tZ)(s.Card.ActionLink,{localizationKey:(0,o.localizationKeys)("signUp.continue.actionLink"),to:w?"../../":_.buildUrlWithAuth(N)})]})})]})})})},9805:function(e,i,t){t.d(i,{W:function(){return s}});var r=t(7126);t(4194);var a=t(3064),l=t(9885),n=t(7321),o=t(5295);let s=e=>{var i,t,s,d,c,u,p,m,h,f,v,g,b,_;let{handleSubmit:A,fields:y,formState:C,canToggleEmailPhone:S,onlyLegalAcceptedMissing:U=!1,handleEmailPhoneToggle:N}=e,{showOptionalFields:E}=(0,a.useAppearance)().parsedLayout,z=e=>{var i;return("emailAddress"===e||"phoneNumber"===e)&&S?!!y[e]:!!y[e]&&(E||(null===(i=y[e])||void 0===i?void 0:i.required))};return(0,r.BX)(l.Form.Root,{onSubmit:A,gap:8,children:[!U&&(0,r.BX)(a.Col,{gap:6,children:[(z("firstName")||z("lastName"))&&(0,r.BX)(l.Form.ControlRow,{elementId:"name",sx:{[o.mqu.sm]:{flexWrap:"wrap"}},children:[z("firstName")&&(0,r.tZ)(l.Form.PlainInput,{...C.firstName.props,isRequired:null===(i=y.firstName)||void 0===i?void 0:i.required,isOptional:!(null===(t=y.firstName)||void 0===t?void 0:t.required)}),z("lastName")&&(0,r.tZ)(l.Form.PlainInput,{...C.lastName.props,isRequired:null===(s=y.lastName)||void 0===s?void 0:s.required,isOptional:!(null===(d=y.lastName)||void 0===d?void 0:d.required)})]}),z("username")&&(0,r.tZ)(l.Form.ControlRow,{elementId:"username",children:(0,r.tZ)(l.Form.PlainInput,{...C.username.props,isRequired:null===(c=y.username)||void 0===c?void 0:c.required,isOptional:!(null===(u=y.username)||void 0===u?void 0:u.required)})}),z("emailAddress")&&(0,r.tZ)(l.Form.ControlRow,{elementId:"emailAddress",children:(0,r.tZ)(l.Form.PlainInput,{...C.emailAddress.props,isRequired:null===(p=y.emailAddress)||void 0===p?void 0:p.required,isOptional:!(null===(m=y.emailAddress)||void 0===m?void 0:m.required),isDisabled:null===(h=y.emailAddress)||void 0===h?void 0:h.disabled,actionLabel:S?(0,a.localizationKeys)("signUp.start.actionLink__use_phone"):void 0,onActionClicked:S?()=>N("phoneNumber"):void 0})}),z("phoneNumber")&&(0,r.tZ)(l.Form.ControlRow,{elementId:"phoneNumber",children:(0,r.tZ)(l.Form.PhoneInput,{...C.phoneNumber.props,isRequired:null===(f=y.phoneNumber)||void 0===f?void 0:f.required,isOptional:!(null===(v=y.phoneNumber)||void 0===v?void 0:v.required),actionLabel:S?(0,a.localizationKeys)("signUp.start.actionLink__use_email"):void 0,onActionClicked:S?()=>N("emailAddress"):void 0})}),z("password")&&(0,r.tZ)(l.Form.ControlRow,{elementId:"password",children:(0,r.tZ)(l.Form.PasswordInput,{...C.password.props,isRequired:null===(g=y.password)||void 0===g?void 0:g.required,isOptional:!(null===(b=y.password)||void 0===b?void 0:b.required)})})]}),(0,r.BX)(a.Col,{center:!0,children:[(0,r.tZ)(n.S,{}),(0,r.BX)(a.Col,{gap:6,sx:{width:"100%"},children:[z("legalAccepted")&&(0,r.tZ)(l.Form.ControlRow,{elementId:"legalAccepted",children:(0,r.tZ)(l.LegalCheckbox,{...C.legalAccepted.props,isRequired:null===(_=y.legalAccepted)||void 0===_?void 0:_.required})}),(0,r.tZ)(l.Form.SubmitButton,{hasArrow:!0,localizationKey:(0,a.localizationKeys)("formButtonPrimary")})]})]})]})}},6031:function(e,i,t){t.d(i,{e:function(){return a}});var r=t(8969);let a=(0,r.sN)(r.L)},9385:function(e,i,t){t.d(i,{O:function(){return m}});var r=t(7126),a=t(2631),l=t(4194),n=t(6749),o=t(7571),s=t(5747),d=t(9885),c=t(138),u=t(4676),p=t(8748);let m=l.memo(e=>{let i=(0,a.cL)(),{navigate:t}=(0,u.useRouter)(),l=(0,d.useCardState)(),{displayConfig:m}=(0,s.O)(),h=(0,o.useSignUpContext)(),f=(0,o.useCoreSignUp)(),v=(0,n.w)(h,m.signUpUrl),g=h.afterSignUpUrl||"/",{continueSignUp:b=!1,..._}=e;return(0,r.tZ)(c.L,{..._,oauthCallback:i=>f.authenticateWithRedirect({continueSignUp:b,redirectUrl:v,redirectUrlComplete:g,strategy:i,unsafeMetadata:h.unsafeMetadata,legalAccepted:e.legalAccepted}).catch(e=>(0,p.S3)(e,[],l.setError)),web3Callback:r=>i.authenticateWithWeb3({customNavigate:t,redirectUrl:g,signUpContinueUrl:"continue",unsafeMetadata:h.unsafeMetadata,strategy:r,legalAccepted:e.legalAccepted}).catch(e=>(0,p.S3)(e,[],l.setError))})})},6789:function(e,i,t){t.d(i,{J:()=>U});var r=t("7126"),a=t("2631"),l=t("4194"),n=t("753"),o=t("4029"),s=t("8969"),d=t("7571"),c=t("3064"),u=t("9885"),p=t("7321"),m=t("9037"),h=t("6391"),f=t("4676"),v=t("8748"),g=t("9805"),b=t("1835"),_=t("3234"),A=t("8655");let y=()=>{let e=(0,a.cL)(),i=(0,m.v)(),{navigate:t}=(0,f.useRouter)(),{signInUrl:l,waitlistUrl:o}=(0,d.useSignUpContext)(),s=(0,_.H)(),{userSettings:p}=(0,d.useEnvironment)(),{mode:h}=p.signUp,v=async()=>{await t(e.buildUrlWithAuth(o))},g=h===n.ci.RESTRICTED?(0,c.localizationKeys)("signUp.restrictedAccess.subtitle"):(0,c.localizationKeys)("signUp.restrictedAccess.subtitleWaitlist");return(0,r.BX)(u.Card.Root,{children:[(0,r.BX)(u.Card.Content,{children:[(0,r.BX)(u.Header.Root,{showLogo:!0,children:[(0,r.tZ)(c.Icon,{icon:A.gO,sx:e=>({margin:"auto",width:e.sizes.$10,height:e.sizes.$10})}),(0,r.tZ)(u.Header.Title,{localizationKey:(0,c.localizationKeys)("signUp.restrictedAccess.title")}),(0,r.tZ)(u.Header.Subtitle,{localizationKey:g})]}),(0,r.tZ)(u.Card.Alert,{children:i.error}),h===n.ci.RESTRICTED&&s&&(0,r.tZ)(c.Flex,{direction:"col",gap:4,children:(0,r.tZ)(c.Button,{localizationKey:(0,c.localizationKeys)("signUp.restrictedAccess.blockButton__emailSupport"),onClick:()=>{window.location.href="mailto:".concat(s)}})}),h===n.ci.WAITLIST&&(0,r.tZ)(c.Flex,{direction:"col",gap:4,children:(0,r.tZ)(c.Button,{localizationKey:(0,c.localizationKeys)("signUp.restrictedAccess.blockButton__joinWaitlist"),onClick:v})})]}),(0,r.tZ)(u.Card.Footer,{children:(0,r.BX)(u.Card.Action,{elementId:"signUp",children:[(0,r.tZ)(u.Card.ActionText,{localizationKey:(0,c.localizationKeys)("signUp.restrictedAccess.actionText")}),(0,r.tZ)(u.Card.ActionLink,{localizationKey:(0,c.localizationKeys)("signUp.restrictedAccess.actionLink"),to:e.buildUrlWithAuth(l)})]})})]})};var C=t("9385"),S=t("5756");let U=(0,s.sN)((0,u.withCardStateProvider)(function(){var e,i;let t=(0,m.v)(),_=(0,a.cL)(),A=(0,h._m)(),U=(0,d.useCoreSignUp)(),{showOptionalFields:N}=(0,c.useAppearance)().parsedLayout,{userSettings:E,displayConfig:z}=(0,d.useEnvironment)(),{navigate:I}=(0,f.useRouter)(),{attributes:K}=E,{setActive:L}=(0,a.cL)(),w=(0,d.useSignUpContext)(),F=(0,d.useOptions)(),k=!!l.useContext(d.SignInContext),{afterSignUpUrl:P,signInUrl:Z,unsafeMetadata:R}=w,T=!!((null===(e=F.experimental)||void 0===e?void 0:e.combinedFlow)&&k),[O,q]=l.useState((0,b.jj)(K,E.signUp.progressive)),{t:x,locale:B}=(0,c.useLocalizations)(),M=w.initialValues||{},[D,X]=l.useState(!1),{userSettings:{passwordSettings:W,usernameSettings:H}}=(0,d.useEnvironment)(),{mode:Y}=E.signUp,V={firstName:(0,v.Yp)("firstName",U.firstName||M.firstName||"",{type:"text",label:(0,c.localizationKeys)("formFieldLabel__firstName"),placeholder:(0,c.localizationKeys)("formFieldInputPlaceholder__firstName")}),lastName:(0,v.Yp)("lastName",U.lastName||M.lastName||"",{type:"text",label:(0,c.localizationKeys)("formFieldLabel__lastName"),placeholder:(0,c.localizationKeys)("formFieldInputPlaceholder__lastName")}),emailAddress:(0,v.Yp)("emailAddress",U.emailAddress||M.emailAddress||"",{type:"email",label:(0,c.localizationKeys)("formFieldLabel__emailAddress"),placeholder:(0,c.localizationKeys)("formFieldInputPlaceholder__emailAddress")}),username:(0,v.Yp)("username",U.username||M.username||"",{type:"text",label:(0,c.localizationKeys)("formFieldLabel__username"),placeholder:(0,c.localizationKeys)("formFieldInputPlaceholder__username"),transformer:e=>e.trim(),buildErrorMessage:e=>(0,v.fq)(e,{t:x,locale:B,usernameSettings:H})}),phoneNumber:(0,v.Yp)("phoneNumber",U.phoneNumber||M.phoneNumber||"",{type:"tel",label:(0,c.localizationKeys)("formFieldLabel__phoneNumber"),placeholder:(0,c.localizationKeys)("formFieldInputPlaceholder__phoneNumber")}),legalAccepted:(0,v.Yp)("legalAccepted","",{type:"checkbox",label:"",defaultChecked:!1,isRequired:E.signUp.legal_consent_enabled||!1}),password:(0,v.Yp)("password","",{type:"password",label:(0,c.localizationKeys)("formFieldLabel__password"),placeholder:(0,c.localizationKeys)("formFieldInputPlaceholder__password"),validatePassword:!0,buildErrorMessage:e=>(0,v.GM)(e,{t:x,locale:B,passwordSettings:W})}),ticket:(0,v.Yp)("ticket",(0,o.X)("__clerk_ticket")||(0,o.X)("__clerk_invitation_token")||"")},j=!!V.ticket.value,Q=!!V.emailAddress.value,G=E.signUp.progressive,$=E.signUp.legal_consent_enabled,J=(0,b.SE)({attributes:K,hasTicket:j,hasEmail:Q,activeCommIdentifierType:O,isProgressiveSignUp:G,legalConsentRequired:$}),ee=()=>{V.ticket.value&&(A.setLoading(),t.setLoading(),U.create({strategy:"ticket",ticket:V.ticket.value}).then(e=>(V.emailAddress.setValue(e.emailAddress||""),"missing_requirements"===e.status&&X(!0),(0,S.v)({signUp:e,verifyEmailPath:"verify-email-address",verifyPhonePath:"verify-phone-number",handleComplete:()=>((0,o.x)("__clerk_ticket"),(0,o.x)("__clerk_invitation_token"),L({session:e.createdSessionId,redirectUrl:P})),navigate:I}))).catch(e=>{V.ticket.setValue(""),(0,v.S3)(e,[],t.setError)}).finally(()=>{A.setIdle(),t.setIdle()}))};l.useLayoutEffect(()=>{ee()},[]),l.useEffect(()=>{(async function(){let e=U.verifications.externalAccount.error;if(e){switch(e.code){case n.O1.NOT_ALLOWED_TO_SIGN_UP:case n.O1.OAUTH_ACCESS_DENIED:case n.O1.NOT_ALLOWED_ACCESS:case n.O1.SAML_USER_ATTRIBUTE_MISSING:case n.O1.OAUTH_EMAIL_DOMAIN_RESERVED_BY_SAML:case n.O1.USER_LOCKED:case n.O1.ENTERPRISE_SSO_USER_ATTRIBUTE_MISSING:case n.O1.ENTERPRISE_SSO_EMAIL_ADDRESS_DOMAIN_MISMATCH:case n.O1.ENTERPRISE_SSO_HOSTED_DOMAIN_MISMATCH:case n.O1.SAML_EMAIL_ADDRESS_DOMAIN_MISMATCH:case n.O1.ORGANIZATION_MEMBERSHIP_QUOTA_EXCEEDED_FOR_SSO:t.setError(e);break;default:t.setError("Unable to complete action at this time. If the problem persists please contact support.")}await U.create({})}})()},[]);let ei=async e=>{var i,r;e.preventDefault();let a=Object.entries(J).reduce((e,i)=>{let[t,r]=i;return e.push(...r&&V[t]?[V[t]]:[]),e},[]);if(R&&a.push({id:"unsafeMetadata",value:R}),J.ticket){let e=()=>{};a.push({id:"strategy",value:"ticket",setValue:e,onChange:e,setError:e})}let l=!!(null===(i=a.find(e=>"emailAddress"===e.id))||void 0===i?void 0:i.value),n=!!(null===(r=a.find(e=>"phoneNumber"===e.id))||void 0===r?void 0:r.value);!l&&!n&&(0,b.Qc)(K,G)&&(a.push(V.emailAddress),a.push(V.phoneNumber)),t.setLoading(),t.setError(void 0);let o=(0,s.wT)(w,z.signUpUrl),d=w.afterSignUpUrl||"/";return U.create((0,v.ni)(a)).then(e=>(0,S.v)({signUp:e,verifyEmailPath:"verify-email-address",verifyPhonePath:"verify-phone-number",handleComplete:()=>L({session:e.createdSessionId,redirectUrl:P}),navigate:I,redirectUrl:o,redirectUrlComplete:d})).catch(e=>(0,v.S3)(e,a,t.setError)).finally(()=>t.setIdle())};if(A.isLoading)return(0,r.tZ)(u.LoadingCard,{});let et=(0,b.Qc)(K,G),er=Object.entries(J).filter(e=>{let[i,t]=e;return N||(null==t?void 0:t.required)}),ea=(0,b.ZO)(E)&&er.length>0,el=(!j||D)&&E.authenticatableSocialStrategies.length>0,en=!j&&E.web3FirstFactors.length>0;return Y===n.ci.PUBLIC||j?(0,r.tZ)(c.Flow.Part,{part:"start",children:(0,r.BX)(u.Card.Root,{children:[(0,r.BX)(u.Card.Content,{children:[(0,r.BX)(u.Header.Root,{showLogo:!0,children:[(0,r.tZ)(u.Header.Title,{localizationKey:(0,c.localizationKeys)("signUp.start.title")}),(0,r.tZ)(u.Header.Subtitle,{localizationKey:(0,c.localizationKeys)("signUp.start.subtitle")})]}),(0,r.tZ)(u.Card.Alert,{children:t.error}),(0,r.BX)(c.Flex,{direction:"col",elementDescriptor:c.descriptors.main,gap:6,children:[(0,r.BX)(u.SocialButtonsReversibleContainerWithDivider,{children:[(el||en)&&(0,r.tZ)(C.O,{enableOAuthProviders:el,enableWeb3Providers:en,continueSignUp:D,legalAccepted:!!V.legalAccepted.checked||void 0}),ea&&(0,r.tZ)(g.W,{handleSubmit:ei,fields:J,formState:V,canToggleEmailPhone:et,handleEmailPhoneToggle:e=>{(0,b.Qc)(K,G)&&q(e)}})]}),!ea&&$&&(0,r.tZ)(u.Form.ControlRow,{elementId:"legalAccepted",children:(0,r.tZ)(u.LegalCheckbox,{...V.legalAccepted.props,isRequired:null===(i=J.legalAccepted)||void 0===i?void 0:i.required})}),!ea&&(0,r.tZ)(p.S,{})]})]}),(0,r.tZ)(u.Card.Footer,{children:(0,r.BX)(u.Card.Action,{elementId:"signUp",children:[(0,r.tZ)(u.Card.ActionText,{localizationKey:(0,c.localizationKeys)("signUp.start.actionText")}),(0,r.tZ)(u.Card.ActionLink,{localizationKey:(0,c.localizationKeys)("signUp.start.actionLink"),to:T?"../":_.buildUrlWithAuth(Z)})]})})]})}):(0,r.tZ)(y,{})}))},8059:function(e,i,t){t.d(i,{D:function(){return d}});var r=t(7126),a=t(2631),l=t(7571),n=t(9885),o=t(4676),s=t(5756);let d=e=>{let{afterSignUpUrl:i}=(0,l.useSignUpContext)(),{setActive:t}=(0,a.cL)(),{navigate:d}=(0,o.useRouter)();return(0,r.tZ)(n.VerificationCodeCard,{cardTitle:e.cardTitle,cardSubtitle:e.cardSubtitle,resendButton:e.resendButton,onCodeEntryFinishedAction:(r,a,l)=>{e.attempt(r).then(async e=>(await a(),(0,s.v)({signUp:e,verifyEmailPath:"../verify-email-address",verifyPhonePath:"../verify-phone-number",continuePath:"../continue",handleComplete:()=>t({session:e.createdSessionId,redirectUrl:i}),navigate:d}))).catch(e=>l(e))},onResendCodeClicked:e.prepare,safeIdentifier:e.safeIdentifier,onIdentityPreviewEditClicked:()=>d("../")})}},5609:function(e,i,t){t.d(i,{A:()=>A});var r=t("7126"),a=t("7571"),l=t("9885"),n=t("3064"),o=t("6391"),s=t("8748"),d=t("8059");let c=()=>{let e=(0,a.useCoreSignUp)(),i=(0,l.useCardState)(),t=e.verifications.emailAddress.status,c=!e.status||"verified"===t;return(0,o.ib)(c?void 0:()=>e.prepareEmailAddressVerification({strategy:"email_code"}).catch(e=>(0,s.S3)(e,[],i.setError)),{name:"prepare",strategy:"email_code",number:e.emailAddress},{staleTime:100}),(0,r.tZ)(n.Flow.Part,{part:"emailCode",children:(0,r.tZ)(d.D,{cardTitle:(0,n.localizationKeys)("signUp.emailCode.title"),cardSubtitle:(0,n.localizationKeys)("signUp.emailCode.subtitle"),inputLabel:(0,n.localizationKeys)("signUp.emailCode.formSubtitle"),resendButton:(0,n.localizationKeys)("signUp.emailCode.resendButton"),prepare:()=>{if(!c)return e.prepareEmailAddressVerification({strategy:"email_code"}).catch(e=>(0,s.S3)(e,[],i.setError))},attempt:i=>e.attemptEmailAddressVerification({code:i}),safeIdentifier:e.emailAddress})})};var u=t("2631"),p=t("4194"),m=t("8969"),h=t("6749"),f=t("9037"),v=t("4814"),g=t("4676"),b=t("5756");let _=()=>{let{t:e}=(0,n.useLocalizations)(),i=(0,a.useCoreSignUp)(),t=(0,a.useSignUpContext)(),{afterSignUpUrl:o}=t,d=(0,f.v)(),{displayConfig:c}=(0,a.useEnvironment)(),{navigate:_}=(0,g.useRouter)(),{setActive:A}=(0,u.cL)(),[y,C]=p.useState(!1),{startEmailLinkFlow:S,cancelEmailLinkFlow:U}=(0,v.E)(i);p.useEffect(()=>{N()},[]);let N=()=>S({redirectUrl:(0,h.d)(t,c.signUpUrl)}).then(e=>E(e)).catch(e=>{(0,s.S3)(e,[],d.setError)}),E=async i=>{let t=i.verifications.emailAddress;"expired"===t.status?d.setError(e((0,n.localizationKeys)("formFieldError__verificationLinkExpired"))):t.verifiedFromTheSameClient()?C(!0):await (0,b.v)({signUp:i,verifyEmailPath:"../verify-email-address",verifyPhonePath:"../verify-phone-number",handleComplete:()=>A({session:i.createdSessionId,redirectUrl:o}),navigate:_})};return y?(0,r.tZ)(m.Ej,{title:(0,n.localizationKeys)("signUp.emailLink.verifiedSwitchTab.title"),subtitle:(0,n.localizationKeys)("signUp.emailLink.verifiedSwitchTab.subtitleNewTab"),status:"verified_switch_tab"}):(0,r.tZ)(n.Flow.Part,{part:"emailLink",children:(0,r.tZ)(l.VerificationLinkCard,{cardTitle:(0,n.localizationKeys)("signUp.emailLink.title"),cardSubtitle:(0,n.localizationKeys)("signUp.emailLink.subtitle"),formTitle:(0,n.localizationKeys)("signUp.emailLink.formTitle"),formSubtitle:(0,n.localizationKeys)("signUp.emailLink.formSubtitle"),resendButton:(0,n.localizationKeys)("signUp.emailLink.resendButton"),onResendCodeClicked:()=>{U(),N()},safeIdentifier:i.emailAddress})})},A=(0,l.withCardStateProvider)(()=>{let{userSettings:e}=(0,a.useEnvironment)(),{attributes:i}=e;return i.email_address.verifications.includes("email_link")?(0,r.tZ)(_,{}):(0,r.tZ)(c,{})})},9515:function(e,i,t){t.d(i,{c:()=>u});var r=t("7126"),a=t("7571"),l=t("3064"),n=t("9885"),o=t("6391"),s=t("8748"),d=t("8059");let c=(0,n.withCardStateProvider)(()=>{let e=(0,a.useCoreSignUp)(),i=(0,n.useCardState)(),t=e.verifications.phoneNumber.status,c=!e.status||"verified"===t;return(0,o.ib)(c?void 0:()=>e.preparePhoneNumberVerification({strategy:"phone_code"}).catch(e=>(0,s.S3)(e,[],i.setError)),{name:"signUp.preparePhoneNumberVerification",strategy:"phone_code",number:e.phoneNumber},{staleTime:100}),(0,r.tZ)(l.Flow.Part,{part:"phoneCode",children:(0,r.tZ)(d.D,{cardTitle:(0,l.localizationKeys)("signUp.phoneCode.title"),cardSubtitle:(0,l.localizationKeys)("signUp.phoneCode.subtitle"),resendButton:(0,l.localizationKeys)("signUp.phoneCode.resendButton"),prepare:()=>{if(!c)return e.preparePhoneNumberVerification({strategy:"phone_code"}).catch(e=>(0,s.S3)(e,[],i.setError))},attempt:i=>e.attemptPhoneNumberVerification({code:i}),safeIdentifier:e.phoneNumber})})}),u=()=>(0,r.tZ)(c,{})},1835:function(e,i,t){t.d(i,{Ag:function(){return n},Qc:function(){return d},SE:function(){return l},ZO:function(){return s},jj:function(){return o}});var r=t(5670);let a=["emailAddress","phoneNumber","username","firstName","lastName","password","ticket","legalAccepted"];function l(e){return a.reduce((i,t)=>{let a=function(e,i){switch(e){case"emailAddress":return function(e){let{attributes:i,hasTicket:t,hasEmail:r,activeCommIdentifierType:a,isProgressiveSignUp:l}=e;if(l){if(!((!t||t&&r)&&i.email_address.enabled)||d(i,l)&&"emailAddress"!==a)return;return{required:i.email_address.required,disabled:!!t&&!!r}}if((!t||t&&r)&&i.email_address.enabled&&i.email_address.used_for_first_factor&&"emailAddress"===a)return{required:!0,disabled:!!t&&!!r}}(i);case"phoneNumber":return function(e){let{attributes:i,hasTicket:t,activeCommIdentifierType:r,isProgressiveSignUp:a}=e;if(a){if(!i.phone_number.enabled||d(i,a)&&"phoneNumber"!==r)return;return{required:i.phone_number.required}}if(!t&&i.phone_number.enabled&&i.phone_number.used_for_first_factor&&"phoneNumber"===r)return{required:!0}}(i);case"password":return function(e){if(e.password.enabled&&e.password.required)return{required:e.password.required}}(i.attributes);case"ticket":return function(e){if(e)return{required:!0}}(i.hasTicket);case"legalAccepted":return function(e){if(e)return{required:!0}}(i.legalConsentRequired);case"username":case"firstName":case"lastName":return function(e,i){let t=(0,r.a1)(e);if(i[t].enabled)return{required:i[t].required}}(e,i.attributes);default:return}}(t,e);return a&&(i[t]=a),i},{})}function n(e,i){if(i){var t,r,a,l,n,o,s,d;let c=!!i.emailAddress,u=(null===(r=i.verifications)||void 0===r?void 0:null===(t=r.emailAddress)||void 0===t?void 0:t.status)==="verified",p=(null===(l=i.verifications)||void 0===l?void 0:null===(a=l.phoneNumber)||void 0===a?void 0:a.status)==="verified",m=(null===(o=i.verifications)||void 0===o?void 0:null===(n=o.externalAccount)||void 0===n?void 0:n.status)==="verified",h=(null===(d=i.verifications)||void 0===d?void 0:null===(s=d.web3Wallet)||void 0===s?void 0:s.status)==="verified",f=null!==i.legalAcceptedAt;c&&u&&delete e.emailAddress,p&&delete e.phoneNumber,(m||h)&&delete e.password,i.firstName&&delete e.firstName,i.lastName&&delete e.lastName,i.username&&delete e.username,f&&delete e.legalAccepted,Object.entries(e).forEach(i=>{let[t,r]=i;r&&!r.required&&delete e[t]})}}let o=(e,i)=>{if(d(e,i))return"emailAddress";let{email_address:t,phone_number:r}=e;return(t.enabled&&i?t.required:t.used_for_first_factor)?"emailAddress":(r.enabled&&i?r.required:r.used_for_first_factor)?"phoneNumber":null};function s(e){let{authenticatableSocialStrategies:i,web3FirstFactors:t}=e;return e.hasValidAuthFactor||!i.length&&!t.length}function d(e,i){let{email_address:t,phone_number:r}=e;return i?t.enabled&&r.enabled&&!t.required&&!r.required:t.used_for_first_factor&&r.used_for_first_factor}}}]);